<?xml version="1.0" encoding="UTF-8"?>
<!-- This file generated by Sakai App Builder -AZ --> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:rsf="http://ponder.org.uk/rsf">
    <head>
        <script type="text/javascript" rsf:id="scr=portal-matter" language="JavaScript" src="/library/js/headscripts.js">
        </script>
        <link href="/library/skin/tool_base.css" rsf:id="scr=portal-matter" type="text/css" rel="stylesheet" media="all"/>
        <link href="/library/skin/default/tool.css" rsf:id="scr=portal-matter" type="text/css" rel="stylesheet" media="all"/>
        <link rel="stylesheet" href="../css/sms.css" type="text/css"/>
        <link rel="stylesheet" href="../css/ui.all.css" type="text/css"/>
        <script type="text/javascript" src="../js/jquery-1.2.6.min.js">
        </script>
        <script type="text/javascript" src="../js/jquery-ui-1.6.custom.min.js">
        </script>
        <script type="text/javascript" src="../js/sms.js">
        </script>
        <script type="text/javascript" src="../js/facebox.js">
        </script>
        <script type='text/javascript' src='../js/jquery.autocomplete/jquery.bgiframe.min.js'>
        </script>
        <script type='text/javascript' src='../js/jquery.autocomplete/jquery.dimensions.js'>
        </script>
        <script type='text/javascript' src='../js/jquery.autocomplete/jquery.autocomplete.js'>
        </script>
        <script type='text/javascript' src='../js/jquery.autocomplete/jquery.autocompletefb.js'>
        </script>
        <script type='text/javascript' src='../js/jquery.form.js'>
        </script>
        <link rel="stylesheet" type="text/css" href="../js/jquery.autocomplete/jquery.autocompletefb.css" />
        <script type="text/javascript">
            $(document).ready(function(){
                //$(document).SMS().bind('reveal.facebox', function(){
					//$.get( "/direct/membership/site/" + $('input[name=sakaiSiteId]').val() + ".json" );
                   	$.fn.SMS.get.peopleByName(); //Populate the people lists ie:individuals
                //});

                //if we are reopening a task, focus on messageBody and update char counter
                $("#messageBody")
                        .focus()
                        .click();

                    $("#smsAddRecipients").bind('click',function() {
                        if($.fn.SMS.get.preserveDomSelections){
                           if ($("#facebox").length != 0) {
                                $("#facebox").fadeIn('fast');
                          }
                        }else{
                            $.facebox({ajax: this.href});
                        }
                        return false;
                    });
                //});

                $("#smsSend").bind('click', function(){
                    //validate variables

                    //Bind EB submit action
                    $(".loadingImage").show();
                         var domElements = [ "sakaiUserIds", "deliveryEntityList", "deliveryMobileNumbersSet", "sakaiSiteId", "senderUserName", "senderUserId", "messageBody"];
                        $.fn.SMS.set.processSubmitTask(domElements, this);
                        window.location.href = $("#goto-home").attr('href');
                    });

                if($("#statusType").length != 0 ){
                    if($("#statusType").val() == "EDIT" || $("#statusType").val() == "REUSE"){
                        $("#smsSend").removeAttr("disabled");
                        $.fn.SMS.get.preserveDomSelections = true;
                    }
                }
                /*$("#smsDatesScheduleDate").datepicker({
                    minDate: 0,
                    maxDate: '+3M +10D'
                });
                $("#smsDatesExpiryDate").datepicker({
                    minDate: 0,
                    maxDate: '+3M +10D'
                });*///$('a[rel=*getReport]').SMS();
                //jQuery.facebox('some html');
            });
        </script>
        <script type="text/javascript" language="JavaScript"
                src="../js/sms.task.js"></script>
        <title rsf:id="page-title">Sms Items</title>
    </head>
    <body>
        <div class="portletBody">
            <div rsf:id="navIntraTool:" class="navIntraTool"/>
            <h3 rsf:id="msg=ui.create.sms.header" class="insColor insBak insBorder">Create SMS</h3>
            <div rsf:id="message-for:*" class="alertMessage">
                <ul style="margin:0px;">
                    <li>
                        Message for user here
                    </li>
                </ul>
            </div>
            <div rsf:id="error" class="">
                You have no messages to moderate
            </div>
            <a rsf:id="error-back" href="index.html">Back</a>
            <span rsf:id="error-purchase">To purchase SMS credits, please email </span>
            <a rsf:id="error-email" href="mailto:help@vula.uct.ac.za?subject=SMS Credits" target="_blank">help@vula.uct.ac.za</a>
            <form rsf:id="form" action="" method="POST">
                <div rsf:id="msg=ui.send.message">
                    Your message:
                </div>
                <div class="Counter"><span rsf:id="msg=ui.send.counter">Characters left:</span> <b id="smsBoxCounter">160</b></div>
        <textarea rsf:id="form-box" name="messageBody" cols="50" rows="7" class="" id="messageBody">
                </textarea>
                <div>
                    <h3 class="addItem"><a rsf:id="form-add-recipients" href="choose-recipients.html" rel="" id="smsAddRecipients">Add recipients</a></h3>
                </div>
                <div id="reportConsole" class="timeCells">
                    <div rsf:id="console-credits">
                        Credits remaining: 100 credits
                    </div>
                    <div rsf:id="console-value">
                        Estimated value: R100.00
                    </div>
                    <div>
                        <span rsf:id="console-purchase">To purchase SMS credits, please email </span>
                        <a rsf:id="console-email" href="mailto:help@vula.uct.ac.za?subject=SMS Credits" target="_blank">help@vula.uct.ac.za</a>
                    </div>
                </div>
                <div id="smsDates">
                    <div id="smsDatesSchedule">
                        <h4 class="schedule">Schedule for a later date/time</h4>
                        <input rsf:id="booleanSchedule" type="checkbox" name="booleanSchedule" id="booleanSchedule" />
                        <label rsf:id="booleanSchedule-label">
                            Yes, I would like to schedule a later date to send this message.
                        </label>
                        <div id="booleanScheduleDate" name="date" style="display:none;">
                                <span rsf:id="smsDatesScheduleDate:">
                            	<input type="text" id="smsDatesScheduleDate" name="smsDatesScheduleDate" value="YYYY/MM/DD" size="12" maxlength="10" />
								<img src="../images/calendar.gif" alt="calendar" />
							</span>
                        </div>
                    </div>
                    <div id="smsDatesExpiry">
                        <h4 class="exipry">Set expiry date/time</h4>
                        <input rsf:id="booleanExpiry" type="checkbox" name="booleanExpiry" id="booleanExpiry" />
                        <label rsf:id="booleanExpiry-label">
                            Yes, I would like to set an Expiry date.
                        </label>
                        <div id="booleanExpiryDate" name="date" style="display:none;">
                            <span rsf:id="smsDatesExpiryDate:">
                            	<input type="text" id="smsDatesExpiryDate" name="smsDatesExpiryDate" value="YYYY/MM/DD" size="12" maxlength="10" />
								<img src="../images/calendar.gif" alt="calendar" />
							</span>
                        </div>
                    </div>
                </div>
                <div class="act">
                <!-- DOM elements for re-opening a task -->
		          <input rsf:id="taskuserIds" id="taskuserIds" name="taskuserIds" type="hidden" value=""/>
		          <input rsf:id="taskdeliveryEntityList" id="taskdeliveryEntityList" name="taskdeliveryEntityList" type="hidden" value=""/>
		          <input rsf:id="taskdeliveryMobileNumbersSet"  id="taskdeliveryMobileNumbersSet" name="taskdeliveryMobileNumbersSet" type="hidden" value=""/>
		          <input rsf:id="taskcopyMe"  id="taskcopyMe" name="taskcopyMe" type="hidden" value=""/>
		          <input rsf:id="id" type="hidden" value="" name="id"/>

                    <input rsf:id="sakaiSiteId" type="hidden" value="" name="sakaiSiteId"/>
                    <input rsf:id="senderUserName" type="hidden" value="" name="senderUserName"/>
                    <input rsf:id="senderUserId" type="hidden" value="" name="senderUserId"/>
                           <input rsf:id="statusType" type="hidden" value="" name="statusType"/>
                    <input rsf:id="form-send" type="button" class="active" disabled="disabled" id="smsSend" value="Send SMS" /> <img class="loadingImage" style="display:none;" src="/library/image/sakai/spinner.gif" alt="Loading" />
					<a rsf:id="goto-home" id="goto-home" style="display:none" href="index.html">Go Home</a>
					<input rsf:id="back" type="button" value="Back" rel="back"/>
                </div>
            </form>
        </div>
    </body>
</html>