<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_11) on Mon Jan 26 07:40:55 CAT 2009 -->
<TITLE>
SmsCoreImpl
</TITLE>

<META NAME="keywords" CONTENT="org.sakaiproject.sms.impl.SmsCoreImpl class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="SmsCoreImpl";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/SmsCoreImpl.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/sakaiproject/sms/impl/SmsBillingImpl.html" title="class in org.sakaiproject.sms.impl"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/sakaiproject/sms/impl/SmsSchedulerImpl.html" title="class in org.sakaiproject.sms.impl"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/sakaiproject/sms/impl/SmsCoreImpl.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SmsCoreImpl.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.sakaiproject.sms.impl</FONT>
<BR>
Class SmsCoreImpl</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.sakaiproject.sms.impl.SmsCoreImpl</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>SmsCoreImpl</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></DL>
</PRE>

<P>
Handle all core logic regarding SMPP gateway communication.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>etienne@psybergate.co.za</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/sakaiproject/sms/api/SmsBilling.html" title="interface in org.sakaiproject.sms.api">SmsBilling</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#smsBilling">smsBilling</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/sakaiproject/sms/api/SmsSmpp.html" title="interface in org.sakaiproject.sms.api">SmsSmpp</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#smsSmpp">smsSmpp</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#SmsCoreImpl()">SmsCoreImpl</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.sakaiproject.sms.hibernate.model.SmsTask</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#calculateEstimatedGroupSize(org.sakaiproject.sms.hibernate.model.SmsTask)">calculateEstimatedGroupSize</A></B>(org.sakaiproject.sms.hibernate.model.SmsTask&nbsp;smsTask)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculate the number of messages to be sent when the new sms task is
 created.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#checkAndSetTasksCompleted()">checkAndSetTasksCompleted</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks for tasks that can be marked as complete.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Set&lt;org.sakaiproject.sms.hibernate.model.SmsMessage&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#generateSmsMessages(org.sakaiproject.sms.hibernate.model.SmsTask)">generateSmsMessages</A></B>(org.sakaiproject.sms.hibernate.model.SmsTask&nbsp;smsTask)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the group list from Sakai, dummy data for now.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.sakaiproject.sms.hibernate.model.SmsTask</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#getNextSmsTask()">getNextSmsTask</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Find the next sms task to process from the task queue.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.sakaiproject.sms.hibernate.model.SmsTask</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#getPreliminaryTask(java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.List)">getPreliminaryTask</A></B>(java.util.Date&nbsp;dateToSend,
                   java.lang.String&nbsp;messageBody,
                   java.lang.String&nbsp;sakaiSiteID,
                   java.lang.String&nbsp;sakaiToolId,
                   java.lang.String&nbsp;sakaiSenderID,
                   java.util.List&lt;java.lang.String&gt;&nbsp;deliveryEntityList)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add a new task to the sms task list, that contains a list of delivery
 entity id</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.sakaiproject.sms.hibernate.model.SmsTask</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#getPreliminaryTask(java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.Set)">getPreliminaryTask</A></B>(java.util.Date&nbsp;dateToSend,
                   java.lang.String&nbsp;messageBody,
                   java.lang.String&nbsp;sakaiSiteID,
                   java.lang.String&nbsp;sakaiToolId,
                   java.lang.String&nbsp;sakaiSenderID,
                   java.util.Set&lt;java.lang.String&gt;&nbsp;deliveryMobileNumbers)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add a new task to the sms task list, that will send sms messages to the
 specified list of mobile numbers</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.sakaiproject.sms.hibernate.model.SmsTask</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#getPreliminaryTask(java.util.Set, java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String)">getPreliminaryTask</A></B>(java.util.Set&lt;java.lang.String&gt;&nbsp;sakaiUserIds,
                   java.util.Date&nbsp;dateToSend,
                   java.lang.String&nbsp;messageBody,
                   java.lang.String&nbsp;sakaiSiteID,
                   java.lang.String&nbsp;sakaiToolId,
                   java.lang.String&nbsp;sakaiSenderID)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get a new sms task object with default values.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.sakaiproject.sms.hibernate.model.SmsTask</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#getPreliminaryTask(java.lang.String, java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String)">getPreliminaryTask</A></B>(java.lang.String&nbsp;deliverGroupId,
                   java.util.Date&nbsp;dateToSend,
                   java.lang.String&nbsp;messageBody,
                   java.lang.String&nbsp;sakaiSiteID,
                   java.lang.String&nbsp;sakaiToolId,
                   java.lang.String&nbsp;sakaiSenderID)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get a new sms task object with default values.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#getSakaiMobileNumber(java.lang.String)">getSakaiMobileNumber</A></B>(java.lang.String&nbsp;sakaiUserID)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get Sakai user's mobile number from member profile.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/sakaiproject/sms/api/SmsBilling.html" title="interface in org.sakaiproject.sms.api">SmsBilling</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#getSmsBilling()">getSmsBilling</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/sakaiproject/sms/api/SmsSmpp.html" title="interface in org.sakaiproject.sms.api">SmsSmpp</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#getSmsSmpp()">getSmsSmpp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#init()">init</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.sakaiproject.sms.hibernate.model.SmsTask</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#insertTask(org.sakaiproject.sms.hibernate.model.SmsTask)">insertTask</A></B>(org.sakaiproject.sms.hibernate.model.SmsTask&nbsp;smsTask)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add a new task to the sms task list, for eg.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#processIncomingMessage(org.sakaiproject.sms.hibernate.model.SmsMessage)">processIncomingMessage</A></B>(org.sakaiproject.sms.hibernate.model.SmsMessage&nbsp;smsMessage)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Try to process an incoming message in real-time by inserting it into the
 queue and calling processMessage immediately.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#processNextTask()">processNextTask</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the next task to process.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#processTask(org.sakaiproject.sms.hibernate.model.SmsTask)">processTask</A></B>(org.sakaiproject.sms.hibernate.model.SmsTask&nbsp;smsTask)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Process is specific persisted task.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#processTimedOutDeliveryReports()">processTimedOutDeliveryReports</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If we did not receive gateway delivery reports for messages that was sent
 out, then we mark those messages as time out after a predefined period as
 determined by DEL_REPORT_TIMEOUT_DURATION on the task.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#processVeryLateDeliveryReports()">processVeryLateDeliveryReports</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Some delivery report might arrive after the predefined timeout period of
 the task.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#sendNotificationEmail(java.lang.String, java.lang.String, java.lang.String)">sendNotificationEmail</A></B>(java.lang.String&nbsp;toAddress,
                      java.lang.String&nbsp;subject,
                      java.lang.String&nbsp;body)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send an email</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#setLoggingLevel(org.apache.log4j.Level)">setLoggingLevel</A></B>(org.apache.log4j.Level&nbsp;level)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#setSmsBilling(org.sakaiproject.sms.api.SmsBilling)">setSmsBilling</A></B>(<A HREF="../../../../org/sakaiproject/sms/api/SmsBilling.html" title="interface in org.sakaiproject.sms.api">SmsBilling</A>&nbsp;smsBilling)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#setSmsSmpp(org.sakaiproject.sms.api.SmsSmpp)">setSmsSmpp</A></B>(<A HREF="../../../../org/sakaiproject/sms/api/SmsSmpp.html" title="interface in org.sakaiproject.sms.api">SmsSmpp</A>&nbsp;smsSmpp)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sakaiproject/sms/impl/SmsCoreImpl.html#tryProcessTaskRealTime(org.sakaiproject.sms.hibernate.model.SmsTask)">tryProcessTaskRealTime</A></B>(org.sakaiproject.sms.hibernate.model.SmsTask&nbsp;smsTask)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If a new task is scheduled for immediate processing, then we try to
 process it in real-time.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="smsSmpp"><!-- --></A><H3>
smsSmpp</H3>
<PRE>
public <A HREF="../../../../org/sakaiproject/sms/api/SmsSmpp.html" title="interface in org.sakaiproject.sms.api">SmsSmpp</A> <B>smsSmpp</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="smsBilling"><!-- --></A><H3>
smsBilling</H3>
<PRE>
public <A HREF="../../../../org/sakaiproject/sms/api/SmsBilling.html" title="interface in org.sakaiproject.sms.api">SmsBilling</A> <B>smsBilling</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="SmsCoreImpl()"><!-- --></A><H3>
SmsCoreImpl</H3>
<PRE>
public <B>SmsCoreImpl</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="calculateEstimatedGroupSize(org.sakaiproject.sms.hibernate.model.SmsTask)"><!-- --></A><H3>
calculateEstimatedGroupSize</H3>
<PRE>
public org.sakaiproject.sms.hibernate.model.SmsTask <B>calculateEstimatedGroupSize</B>(org.sakaiproject.sms.hibernate.model.SmsTask&nbsp;smsTask)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#calculateEstimatedGroupSize(org.sakaiproject.sms.hibernate.model.SmsTask)">SmsCore</A></CODE></B></DD>
<DD>Calculate the number of messages to be sent when the new sms task is
 created. Also populate other estimated values on the task.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#calculateEstimatedGroupSize(org.sakaiproject.sms.hibernate.model.SmsTask)">calculateEstimatedGroupSize</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="setLoggingLevel(org.apache.log4j.Level)"><!-- --></A><H3>
setLoggingLevel</H3>
<PRE>
public void <B>setLoggingLevel</B>(org.apache.log4j.Level&nbsp;level)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="generateSmsMessages(org.sakaiproject.sms.hibernate.model.SmsTask)"><!-- --></A><H3>
generateSmsMessages</H3>
<PRE>
public java.util.Set&lt;org.sakaiproject.sms.hibernate.model.SmsMessage&gt; <B>generateSmsMessages</B>(org.sakaiproject.sms.hibernate.model.SmsTask&nbsp;smsTask)</PRE>
<DL>
<DD>Get the group list from Sakai, dummy data for now.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#generateSmsMessages(org.sakaiproject.sms.hibernate.model.SmsTask)">generateSmsMessages</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="getNextSmsTask()"><!-- --></A><H3>
getNextSmsTask</H3>
<PRE>
public org.sakaiproject.sms.hibernate.model.SmsTask <B>getNextSmsTask</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#getNextSmsTask()">SmsCore</A></CODE></B></DD>
<DD>Find the next sms task to process from the task queue. Determine tasks
 with highest priority. Priority is based on message age and type.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#getNextSmsTask()">getNextSmsTask</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>SmsTask</DL>
</DD>
</DL>
<HR>

<A NAME="getPreliminaryTask(java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.Set)"><!-- --></A><H3>
getPreliminaryTask</H3>
<PRE>
public org.sakaiproject.sms.hibernate.model.SmsTask <B>getPreliminaryTask</B>(java.util.Date&nbsp;dateToSend,
                                                                       java.lang.String&nbsp;messageBody,
                                                                       java.lang.String&nbsp;sakaiSiteID,
                                                                       java.lang.String&nbsp;sakaiToolId,
                                                                       java.lang.String&nbsp;sakaiSenderID,
                                                                       java.util.Set&lt;java.lang.String&gt;&nbsp;deliveryMobileNumbers)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#getPreliminaryTask(java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.Set)">SmsCore</A></CODE></B></DD>
<DD>Add a new task to the sms task list, that will send sms messages to the
 specified list of mobile numbers
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#getPreliminaryTask(java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.Set)">getPreliminaryTask</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="getPreliminaryTask(java.util.Set, java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String)"><!-- --></A><H3>
getPreliminaryTask</H3>
<PRE>
public org.sakaiproject.sms.hibernate.model.SmsTask <B>getPreliminaryTask</B>(java.util.Set&lt;java.lang.String&gt;&nbsp;sakaiUserIds,
                                                                       java.util.Date&nbsp;dateToSend,
                                                                       java.lang.String&nbsp;messageBody,
                                                                       java.lang.String&nbsp;sakaiSiteID,
                                                                       java.lang.String&nbsp;sakaiToolId,
                                                                       java.lang.String&nbsp;sakaiSenderID)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#getPreliminaryTask(java.util.Set, java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String)">SmsCore</A></CODE></B></DD>
<DD>Get a new sms task object with default values. This step is required.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#getPreliminaryTask(java.util.Set, java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String)">getPreliminaryTask</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="getPreliminaryTask(java.lang.String, java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String)"><!-- --></A><H3>
getPreliminaryTask</H3>
<PRE>
public org.sakaiproject.sms.hibernate.model.SmsTask <B>getPreliminaryTask</B>(java.lang.String&nbsp;deliverGroupId,
                                                                       java.util.Date&nbsp;dateToSend,
                                                                       java.lang.String&nbsp;messageBody,
                                                                       java.lang.String&nbsp;sakaiSiteID,
                                                                       java.lang.String&nbsp;sakaiToolId,
                                                                       java.lang.String&nbsp;sakaiSenderID)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#getPreliminaryTask(java.lang.String, java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String)">SmsCore</A></CODE></B></DD>
<DD>Get a new sms task object with default values. This step is required.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#getPreliminaryTask(java.lang.String, java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String)">getPreliminaryTask</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="getPreliminaryTask(java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.List)"><!-- --></A><H3>
getPreliminaryTask</H3>
<PRE>
public org.sakaiproject.sms.hibernate.model.SmsTask <B>getPreliminaryTask</B>(java.util.Date&nbsp;dateToSend,
                                                                       java.lang.String&nbsp;messageBody,
                                                                       java.lang.String&nbsp;sakaiSiteID,
                                                                       java.lang.String&nbsp;sakaiToolId,
                                                                       java.lang.String&nbsp;sakaiSenderID,
                                                                       java.util.List&lt;java.lang.String&gt;&nbsp;deliveryEntityList)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#getPreliminaryTask(java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.List)">SmsCore</A></CODE></B></DD>
<DD>Add a new task to the sms task list, that contains a list of delivery
 entity id
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#getPreliminaryTask(java.util.Date, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.List)">getPreliminaryTask</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="getSakaiMobileNumber(java.lang.String)"><!-- --></A><H3>
getSakaiMobileNumber</H3>
<PRE>
public java.lang.String <B>getSakaiMobileNumber</B>(java.lang.String&nbsp;sakaiUserID)</PRE>
<DL>
<DD>Get Sakai user's mobile number from member profile. Return the mobile
 number, null if not found.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#getSakaiMobileNumber(java.lang.String)">getSakaiMobileNumber</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sakaiUserID</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="getSmsBilling()"><!-- --></A><H3>
getSmsBilling</H3>
<PRE>
public <A HREF="../../../../org/sakaiproject/sms/api/SmsBilling.html" title="interface in org.sakaiproject.sms.api">SmsBilling</A> <B>getSmsBilling</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getSmsSmpp()"><!-- --></A><H3>
getSmsSmpp</H3>
<PRE>
public <A HREF="../../../../org/sakaiproject/sms/api/SmsSmpp.html" title="interface in org.sakaiproject.sms.api">SmsSmpp</A> <B>getSmsSmpp</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="init()"><!-- --></A><H3>
init</H3>
<PRE>
public void <B>init</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="insertTask(org.sakaiproject.sms.hibernate.model.SmsTask)"><!-- --></A><H3>
insertTask</H3>
<PRE>
public org.sakaiproject.sms.hibernate.model.SmsTask <B>insertTask</B>(org.sakaiproject.sms.hibernate.model.SmsTask&nbsp;smsTask)
                                                        throws <A HREF="../../../../org/sakaiproject/sms/impl/SmsTaskValidationException.html" title="class in org.sakaiproject.sms.impl">SmsTaskValidationException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#insertTask(org.sakaiproject.sms.hibernate.model.SmsTask)">SmsCore</A></CODE></B></DD>
<DD>Add a new task to the sms task list, for eg. send message to all
 administrators at 10:00, or get latest announcements and send to mobile
 numbers of Sakai group x (phase II). Validation will be done to make sure
 that the preliminary values are supplied.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#insertTask(org.sakaiproject.sms.hibernate.model.SmsTask)">insertTask</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>smsTask</CODE> - the sms task
<DT><B>Returns:</B><DD>the sms task
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/sakaiproject/sms/impl/SmsTaskValidationException.html" title="class in org.sakaiproject.sms.impl">SmsTaskValidationException</A></CODE> - the sms task validation exception</DL>
</DD>
</DL>
<HR>

<A NAME="processIncomingMessage(org.sakaiproject.sms.hibernate.model.SmsMessage)"><!-- --></A><H3>
processIncomingMessage</H3>
<PRE>
public void <B>processIncomingMessage</B>(org.sakaiproject.sms.hibernate.model.SmsMessage&nbsp;smsMessage)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#processIncomingMessage(org.sakaiproject.sms.hibernate.model.SmsMessage)">SmsCore</A></CODE></B></DD>
<DD>Try to process an incoming message in real-time by inserting it into the
 queue and calling processMessage immediately. If unable to process, then
 leave in the queue for the job scheduler to handle. Incoming messages are
 for later development in phase II.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#processIncomingMessage(org.sakaiproject.sms.hibernate.model.SmsMessage)">processIncomingMessage</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="processNextTask()"><!-- --></A><H3>
processNextTask</H3>
<PRE>
public void <B>processNextTask</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#processNextTask()">SmsCore</A></CODE></B></DD>
<DD>Gets the next task to process. Based on specific criteria like status and
 date to sent. This is typically called by the sms scheduler.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#processNextTask()">processNextTask</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="processTask(org.sakaiproject.sms.hibernate.model.SmsTask)"><!-- --></A><H3>
processTask</H3>
<PRE>
public void <B>processTask</B>(org.sakaiproject.sms.hibernate.model.SmsTask&nbsp;smsTask)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#processTask(org.sakaiproject.sms.hibernate.model.SmsTask)">SmsCore</A></CODE></B></DD>
<DD>Process is specific persisted task. A task can be retried if a previous
 send attempt was unsuccessful due to gateway connection problems. A retry
 will be re-scheduled some time in the future. When the max retry attempts
 are reached or if credits are insufficient, the task is marked as failed.
 
 The task will also expire if it cannot be processed in a specified time.
 See http://jira.sakaiproject.org/jira/browse/SMS-9
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#processTask(org.sakaiproject.sms.hibernate.model.SmsTask)">processTask</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="processTimedOutDeliveryReports()"><!-- --></A><H3>
processTimedOutDeliveryReports</H3>
<PRE>
public void <B>processTimedOutDeliveryReports</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#processTimedOutDeliveryReports()">SmsCore</A></CODE></B></DD>
<DD>If we did not receive gateway delivery reports for messages that was sent
 out, then we mark those messages as time out after a predefined period as
 determined by DEL_REPORT_TIMEOUT_DURATION on the task. These messages are
 not billable. But they will be billable if the report comes in ver late.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#processTimedOutDeliveryReports()">processTimedOutDeliveryReports</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="sendNotificationEmail(java.lang.String, java.lang.String, java.lang.String)"><!-- --></A><H3>
sendNotificationEmail</H3>
<PRE>
public boolean <B>sendNotificationEmail</B>(java.lang.String&nbsp;toAddress,
                                     java.lang.String&nbsp;subject,
                                     java.lang.String&nbsp;body)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#sendNotificationEmail(java.lang.String, java.lang.String, java.lang.String)">SmsCore</A></CODE></B></DD>
<DD>Send an email
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#sendNotificationEmail(java.lang.String, java.lang.String, java.lang.String)">sendNotificationEmail</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="setSmsBilling(org.sakaiproject.sms.api.SmsBilling)"><!-- --></A><H3>
setSmsBilling</H3>
<PRE>
public void <B>setSmsBilling</B>(<A HREF="../../../../org/sakaiproject/sms/api/SmsBilling.html" title="interface in org.sakaiproject.sms.api">SmsBilling</A>&nbsp;smsBilling)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setSmsSmpp(org.sakaiproject.sms.api.SmsSmpp)"><!-- --></A><H3>
setSmsSmpp</H3>
<PRE>
public void <B>setSmsSmpp</B>(<A HREF="../../../../org/sakaiproject/sms/api/SmsSmpp.html" title="interface in org.sakaiproject.sms.api">SmsSmpp</A>&nbsp;smsSmpp)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="tryProcessTaskRealTime(org.sakaiproject.sms.hibernate.model.SmsTask)"><!-- --></A><H3>
tryProcessTaskRealTime</H3>
<PRE>
public void <B>tryProcessTaskRealTime</B>(org.sakaiproject.sms.hibernate.model.SmsTask&nbsp;smsTask)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#tryProcessTaskRealTime(org.sakaiproject.sms.hibernate.model.SmsTask)">SmsCore</A></CODE></B></DD>
<DD>If a new task is scheduled for immediate processing, then we try to
 process it in real-time. If it is not possible (for e.g. too many
 threads) then the task will be handled by the scheduler. If the scheduler
 is too busy and the task is picked up too late, then the task is marked
 as STATUS_EXPIRE
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#tryProcessTaskRealTime(org.sakaiproject.sms.hibernate.model.SmsTask)">tryProcessTaskRealTime</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="checkAndSetTasksCompleted()"><!-- --></A><H3>
checkAndSetTasksCompleted</H3>
<PRE>
public void <B>checkAndSetTasksCompleted</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#checkAndSetTasksCompleted()">SmsCore</A></CODE></B></DD>
<DD>Checks for tasks that can be marked as complete. If the total messages
 processed equals the actual group size the task is marked as complete.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#checkAndSetTasksCompleted()">checkAndSetTasksCompleted</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="processVeryLateDeliveryReports()"><!-- --></A><H3>
processVeryLateDeliveryReports</H3>
<PRE>
public void <B>processVeryLateDeliveryReports</B>()</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#processVeryLateDeliveryReports()">SmsCore</A></CODE></B></DD>
<DD>Some delivery report might arrive after the predefined timeout period of
 the task. Wee still need to handle these reports because the messages are
 now billable. We need to receive them, update SMS_MESSAGE and make a
 account entry of type TRANS_CREDIT_LATE_MESSAGE.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html#processVeryLateDeliveryReports()">processVeryLateDeliveryReports</A></CODE> in interface <CODE><A HREF="../../../../org/sakaiproject/sms/api/SmsCore.html" title="interface in org.sakaiproject.sms.api">SmsCore</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/SmsCoreImpl.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/sakaiproject/sms/impl/SmsBillingImpl.html" title="class in org.sakaiproject.sms.impl"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/sakaiproject/sms/impl/SmsSchedulerImpl.html" title="class in org.sakaiproject.sms.impl"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/sakaiproject/sms/impl/SmsCoreImpl.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SmsCoreImpl.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
